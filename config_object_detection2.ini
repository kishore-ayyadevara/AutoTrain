[project]
owner: sizhky
name: open-images-bus-trucks
location: ${project.name}
model_directory: ${project.location}/models2
type: object_detection
num_classes: 2
auto_train_lib: auto_train_${project.type}
classes: ["Bus", "Truck"]

[label_studio]
base_data_dir: /tmp/data/

[label_studio_ml]
app_name: ${project.name}/my_ml_model
script_path: ${project.auto_train_lib}/script.py

[online_training]
save_dir: ${project.model_directory}/model.pt

[architecture]
model_type: mmdet.retinanet
backbone: resnet50_fpn_1x
pretrained: True
size: 384
[architecture.extra_args]
img_size: ${architecture.size}

[training]
dir: ${project.location}/data
images_dir: ${training.dir}/images
annotations_file: ${training.dir}/annotations/mini_open_images_train_coco_format.json
train_ratio: 0.8

[training.preprocess]
@augmentations: get_train_transforms
size: ${architecture.size}
presize: 512

[training.data]
train_dir: ${training.dir}/train
validation_dir: ${training.dir}/validation

[training.scheme]
epochs: 25
lr: 1e-4
freeze_epochs: 5
resume_training_from: ${project.model_directory}/model.pt
output_path: ${project.model_directory}/model.pt

[testing]
batch_size: 2
detection_threshold: 0.25
nms_iou_threshold: 0.45
[testing.preprocess]
@augmentations: get_val_transforms
size: ${architecture.size}
presize: 512
